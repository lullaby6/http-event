function httpEvent(){let t=document.querySelectorAll("[he-event]");t.forEach(t=>{if(t.hasAttribute("he-loaded"))return;t.setAttribute("he-loaded","");let e=t.getAttribute("he-event");"load"==e?httpEventMethod(t,e):t.addEventListener(e,async t=>{t.target.hasAttribute("he-prevent")&&t.preventDefault(),httpEventMethod(t.target,e)})})}async function httpEventMethod(targetElement,eventName){let httpData={};"submit"==eventName&&(httpData=Object.fromEntries(new FormData(targetElement))),targetElement.hasAttribute("he-data")&&(httpData={...httpData,...JSON.parse(targetElement.getAttribute("he-data"))});let url=targetElement.getAttribute("he-url")||window.location.href,method=targetElement.getAttribute("he-method")||"GET",headers={Accept:"application/json","Content-Type":"application/json"};targetElement.hasAttribute("he-authentication")&&(headers.Authentication=targetElement.getAttribute("he-authentication")),targetElement.hasAttribute("he-authorization")&&(headers.Authorization=targetElement.getAttribute("he-authorization")),targetElement.hasAttribute("he-headers")&&(headers={...headers,...JSON.parse(targetElement.getAttribute("he-headers"))}),targetElement.hasAttribute("he-headers-storage")&&(Object.entries(storageHeaders=JSON.parse(targetElement.getAttribute("he-headers-storage"))).forEach(([t,e])=>storageHeaders[t]=localStorage.getItem(e)),headers={...headers,...storageHeaders});try{let response=await fetch(url,{method,headers,body:JSON.stringify(httpData)}),responseData=null;if(responseData=targetElement.hasAttribute("he-json")?await response.json():await response.text(),targetElement.hasAttribute("he-log")&&console.log(responseData),targetElement.hasAttribute("he-storage")&&localStorage.setItem(targetElement.getAttribute("he-storage"),responseData),targetElement.hasAttribute("he-run")&&eval(targetElement.getAttribute("he-run")),targetElement.hasAttribute("he-clear-inputs")){let inputs=targetElement.querySelectorAll("input");inputs.forEach(t=>t.value="")}if(targetElement.hasAttribute("he-target")){let selector=targetElement.getAttribute("he-target"),targetSelector=null;if("this"==selector?targetSelector=targetElement:"parent"==selector?targetSelector=targetElement.parentElement:"children"==selector?targetSelector=targetElement.children:"next"==selector?targetSelector=targetElement.nextElementSibling:"previous"==selector&&(targetSelector=targetElement.previousElementSibling),targetSelector||(targetSelector=targetElement.querySelector(selector)),targetSelector||(targetSelector=targetElement.closest(selector)),targetSelector||(targetSelector=document.querySelector(selector)),targetSelector){let swap=targetElement.getAttribute("he-swap")||"innerHTML";"innerHTML"==swap?targetSelector.innerHTML=responseData:"outerHTML"==swap?targetSelector.outerHTML=responseData:"value"==swap?targetSelector.value=responseData:"innerText"==swap?targetSelector.innerText=responseData:"textContent"==swap?targetSelector.textContent=responseData:"afterbegin"==swap||"beforeend"==swap||"beforebegin"==swap||"afterend"==swap?targetSelector.insertAdjacentHTML(swap,responseData):"remove"==swap&&targetSelector.remove(),targetElement.hasAttribute("he-attr")&&targetSelector.setAttribute(targetElement.getAttribute("he-attr"),responseData)}}targetElement.hasAttribute("he-redirect")&&(window.location.href=targetElement.getAttribute("he-redirect"))}catch(error){console.error(`[http-event] ${error}`)}}document.addEventListener("DOMContentLoaded",t=>{httpEvent()});